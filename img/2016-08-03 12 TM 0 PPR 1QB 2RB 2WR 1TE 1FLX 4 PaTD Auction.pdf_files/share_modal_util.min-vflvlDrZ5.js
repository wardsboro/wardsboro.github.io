(function(){define(["external/react","external/underscore","modules/clean/account/email","modules/clean/react/browse/constants","modules/clean/react/browse/models","modules/clean/react/modal","modules/clean/react/teams/modals/limited_team_folder_settings_modal","modules/clean/react/teams/modals/limited_team_share_folder_modal","modules/clean/sharing/actions/share_modal","modules/clean/sharing/api/client","modules/clean/sharing/content_info","modules/clean/sharing/ui_util","modules/clean/viewer","modules/constants/sharing","modules/dirty/sharing/share_modal"],function(e,t,n,r,a,o,s,i,l,d,u,c,h,m,I){var f,_,F,S,g,N,P,w,p,M,T,v,C,A,E,D,R,x,b;return F=n.EmailVerification,N=r.FileTypes,f=a.BrowseContext,S=a.File,p=o.Modal,g=d.FileShareApiClient,P=d.FolderShareApiClient,_=u.ContentInfo,w=c.GoldenGate,T=c.Tiburon,M=I.ShareModalLegacyShim,v=e.createElement,C=function(){return Math.random()},D=function(e,n,r){var a,o,s;null==r&&(r={}),e.id||(e=h.get_viewer().get_user_by_id(e)),null==r.userRootNs&&(r.userRootNs=e.root_ns),s=A(n,e.id),t.extend(s,r),s.modalSessionId||(s.modalSessionId=C());try{o=_.createFromParams(s)}catch(e){o=null}return a=n instanceof f?n:s.browseContext,{browseContext:a,contentInfo:o,shareModalInfo:s,user:e}},b=function(e,t,n,r){var a,o,s,i,d;return s=(null!=n?n.isNonUserRelativeContext:void 0)||r.isNonUserRelativeContext,R(e,t,n)?(F.get_for_user(e).verified_or_show()&&(d=e.id+":"+t.id,i=t.isFolder()?P:g,o=new i({userId:e.id}),a=new l(d,o,e),a.initializeShareModal(t,r.inputContentName,s),p.showInstance(v(M,{actionHandler:a,client:o,user:e,initialRecipientTokens:r.prefillContacts,renderedClass:M,teamGroupInfo:t.teamGroupInfo(),isInContentManager:s}))),!0):!1},R=function(e,t,n){var r;if(!w.canDeepNest(e.id)&&!T.goldenGateUI(e.id)){if((null!=n?n.isInsideAutoTeamFolder:void 0)&&t.isFolder())return!1;if(t.isTeamSharedFolder())return!1}return t.isFolder()?null!=t.pathExists()?(r=t.displayPath(),r&&"/"!==r&&T.foldersUI(e.id)):!0:T.filesUI(e.id)},x=function(e,t,n){var r;return t.isTeamSharedFolder&&h.get_viewer().team_is_limited?(!e.is_team_admin||"BROWSE_SHARED_FOLDER_BANNER"!==(r=t.origin)&&"BROWSE_GLOBAL_ACTIONS"!==r?i.showModalInstance({fqPath:t.fqPath}):s.showWithProps({folderId:t.targetNsId.toString(),folderName:n.getNameOfTargetFolder(),user:e}),!0):void 0},A=function(e,t){var n,r;return e instanceof S?(n=(r=e.type)===N.FILE||r===N.PACKAGE,{exists:!e.isDeleted,fileId:e.file_id,fqPath:e.fq_path,isFolder:!n,isTeamSharedFolder:e.type===N.TEAM_SHARED_FOLDER,nsId:e.ns_id,nsPath:e.ns_path,targetNsId:e.target_ns}):e instanceof f?E(e,t):e},E=function(e,t){return e.isInsideDeletedFolder||e.isInsideDeletedSharedFolder?null:e.isInFolderMode?e.isInsideSharedFolder?e.currentNSPath&&(e.isInsideTeamFolderTree||w.hasNewMembershipUI(t))?{fqPath:e.currentFQPath,isFolder:!0,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}:{fqPath:e.currentMountPoint,isFolder:!0,nsId:null,nsPath:e.currentMountPoint,targetNsId:e.currentNSID,isTeamSharedFolder:e.isInsideAutoTeamFolder}:{fqPath:e.currentFQPath,isFolder:!0,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}:{fqPath:e.currentFQPath,isFolder:!1,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}},{generateModalSessionId:C,getShareModalInfo:A,getShareModalInfoFromContext:E,getSharingInfo:D,shouldShowTiburonUI:R,showFastrakShareModalIfAllowed:x,showTiburonUIIfAllowedNonPublic:b}})}).call(this);
//# sourceMappingURL=share_modal_util.min.js-vflbIEGz6.map