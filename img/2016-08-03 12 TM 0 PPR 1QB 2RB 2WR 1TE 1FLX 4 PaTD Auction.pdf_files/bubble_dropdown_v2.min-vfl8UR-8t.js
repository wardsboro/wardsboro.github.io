(function(){define(["jquery","external/classnames","external/react","external/react-dom","external/underscore","modules/clean/keycode","modules/clean/react/css","modules/clean/react/overlay"],function(t,o,e,r,s,i,n,a){var p,l,d,u,h,c,b;return u=a.PositionedOverlay,b=e.DOM,c=e.createElement,d=u.POSITIONS,l=e.createClass({displayName:"BubbleDropdownContents",propTypes:{targetNode:e.PropTypes.instanceOf(HTMLElement).isRequired,position:e.PropTypes.oneOf(s.values(d)).isRequired,verticalArrowOffset:e.PropTypes.number,horizontalArrowOffset:e.PropTypes.number,shouldShowArrow:e.PropTypes.bool,className:e.PropTypes.string},getDefaultProps:function(){return{verticalArrowOffset:0,horizontalArrowOffset:0,shouldShowArrow:!0,className:null}},componentDidMount:function(){return this._adjustArrowPosition()},componentDidUpdate:function(){return this._adjustArrowPosition()},_getArrowStyleFromPosition:function(){var t,o;return o={},o[""+d.TOP_LEFT]="top-left",o[""+d.TOP]="top",o[""+d.TOP_RIGHT]="top-right",o[""+d.LEFT_TOP]="left-top",o[""+d.LEFT]="left",o[""+d.LEFT_BOTTOM]="left-bottom",o[""+d.RIGHT_TOP]="right-top",o[""+d.RIGHT]="right",o[""+d.RIGHT_BOTTOM]="right-bottom",o[""+d.BOTTOM_LEFT]="bottom-left",o[""+d.BOTTOM]="bottom",o[""+d.BOTTOM_RIGHT]="bottom-right",o[""+d.TOP_ALIGN_LEFT]="top-align-left",o[""+d.TOP_ALIGN_RIGHT]="top-align-right",o[""+d.LEFT_ALIGN_TOP]="left-align-top",o[""+d.LEFT_ALIGN_BOTTOM]="left-align-bottom",o[""+d.RIGHT_ALIGN_TOP]="right-align-top",o[""+d.RIGHT_ALIGN_BOTTOM]="right-align-bottom",o[""+d.BOTTOM_ALIGN_LEFT]="bottom-align-left",o[""+d.BOTTOM_ALIGN_RIGHT]="bottom-align-right",t=o,t[this.props.position]},_adjustArrowPosition:function(){var o;if(this.props.shouldShowArrow){switch(o=t(r.findDOMNode(this.refs.bubbleArrowContainer)),this.props.position){case d.TOP_ALIGN_LEFT:case d.BOTTOM_ALIGN_LEFT:o.css("left",this.props.targetNode.offsetWidth/2);break;case d.TOP_ALIGN_RIGHT:case d.BOTTOM_ALIGN_RIGHT:o.css("right",this.props.targetNode.offsetWidth/2);break;case d.LEFT_ALIGN_TOP:case d.RIGHT_ALIGN_TOP:o.css("top",this.props.targetNode.offsetHeight/2);break;case d.LEFT_ALIGN_BOTTOM:case d.RIGHT_ALIGN_BOTTOM:o.css("bottom",this.props.targetNode.offsetHeight/2)}return(this.props.verticalArrowOffset||this.props.horizontalArrowOffset)&&(this._getArrowStyleFromPosition().match(/^(top|bottom)/)&&o.css("left","-="+this.props.horizontalArrowOffset),this._getArrowStyleFromPosition().match(/^(left|right)/))?o.css("top","-="+this.props.verticalArrowOffset):void 0}},render:function(){return b.div({ref:"dropdown",className:o("bubble-dropdown-v2","bubble-dropdown-v2--"+this._getArrowStyleFromPosition(),this.props.className),"aria-labelledby":this.props.targetNode.id},this.props.children,this.props.shouldShowArrow?b.div({ref:"bubbleArrowContainer",className:"bubble-arrow-container"},b.div({className:"bubble-arrow-border"}),b.div({className:"bubble-arrow"})):null)}}),h=e.createClass({displayName:"BubbleDropdown",propTypes:{targetButton:function(t,o,e){return null==t.targetButton||"button"!==t.targetButton.type?new Error("BubbleDropdown's targetButton must be a `<button>`"):void 0},position:e.PropTypes.oneOf(s.values(d)).isRequired,targetFixed:e.PropTypes.bool,verticalDisplacement:e.PropTypes.number,horizontalDisplacement:e.PropTypes.number,className:e.PropTypes.string,disabled:e.PropTypes.bool,shouldShowArrow:e.PropTypes.bool,shouldTrapKeyboardFocus:e.PropTypes.bool,onShowDropdown:e.PropTypes.func,onHideDropdown:e.PropTypes.func},getDefaultProps:function(){return{targetFixed:!1,verticalDisplacement:0,horizontalDisplacement:0,className:null,disabled:!1,shouldShowArrow:!0,shouldTrapKeyboardFocus:!1,onShowDropdown:s.noop,onHideDropdown:s.noop}},getInitialState:function(){return{isVisible:!1,targetNode:null,shouldAutoFocusDropdownContent:!1}},componentDidMount:function(){var t;return t=r.findDOMNode(this.refs.bubbleDropdownContainer).childNodes[0],t.hasAttribute("id")||t.setAttribute("id","bubbleDropdownTarget-"+s.uniqueId()),this.setState({targetNode:t})},componentDidUpdate:function(t,o){return o.isVisible===this.state.isVisible||this.state.isVisible?void 0:this._hasHidden()},showDropdown:function(){return this.props.disabled?void 0:this.setState({isVisible:!0})},hideDropdown:function(){return this.props.disabled?void 0:this.setState({isVisible:!1})},_handleMouseDown:function(t){return this.setState({shouldAutoFocusDropdownContent:!1},this._toggle),t.preventDefault()},_handleKeyDown:function(t){var o;return(o=t.keyCode)===i.ENTER||o===i.SPACE?(this.setState({shouldAutoFocusDropdownContent:!0},this._toggle),t.preventDefault()):void 0},_toggle:function(){return this.props.disabled?void 0:this.setState({isVisible:!this.state.isVisible})},_hasShown:function(){return this.state.targetNode.setAttribute("aria-expanded",!0),this.props.onShowDropdown()},_hasHidden:function(){return this.state.targetNode.setAttribute("aria-expanded",!1),this.props.onHideDropdown()},render:function(){return b.div({className:"bubble-dropdown-v2-container",onMouseDown:this._handleMouseDown,onKeyDown:this._handleKeyDown,ref:"bubbleDropdownContainer"},this.props.targetButton,this.state.isVisible&&!this.props.disabled?c(u,{targetNode:this.state.targetNode,isTargetPositionFixed:this.props.targetFixed,shouldTrapKeyboardFocus:this.props.shouldTrapKeyboardFocus,shouldAutoFocusOverlayContent:this.state.shouldAutoFocusDropdownContent,position:this.props.position,positionOffset:{horizontal:this.props.horizontalDisplacement,vertical:this.props.verticalDisplacement},onRendered:function(t){return function(){return t._hasShown()}}(this),onBlur:function(t){return function(){return t.hideDropdown()}}(this)},c(l,{ref:"bubbleDropdownContents",targetNode:this.state.targetNode,position:this.props.position,verticalArrowOffset:this.props.verticalDisplacement,horizontalArrowOffset:this.props.horizontalDisplacement,shouldShowArrow:this.props.shouldShowArrow,className:this.props.className},this.props.children)):void 0)}}),p=n(h,["/static/css/components/bubble_dropdown_v2-vflhhYVBe.css"]),p.POSITIONS=d,p})}).call(this);
//# sourceMappingURL=bubble_dropdown_v2.min.js-vflHW5YZZ.map